{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  configMigration: true,
  extends: [
    "config:recommended",
    ":pinDependencies",
    ":pinDevDependencies",
    "helpers:pinGitHubActionDigests",
    "mergeConfidence:all-badges",
  ],
  // Reduce PR noise and CI load by only creating PRs on the weekend
  schedule: ["on friday and saturday"],
  prHourlyLimit: 5,
  packageRules: [
    // use LTS node in docker builds
    // avoid auto-complete for nodejs APIs not available in LTS version
    {
      matchPackageNames: ["@types/node"],
      allowedVersions: "^20",
    },
    // jest and related plugins
    {
      matchPackagePatterns: ["jest"],
      groupName: "jest and related packages",
      groupSlug: "jest*",
    },
    // Reduce PR noise by grouping all (supposedly) none breaking **CLI** dev tools
    // If the PR build passes for these tools, we can be very confident merging is safe.
    {
      // eslint and related plugins
      matchPackagePatterns: ["eslint"],
      // add other dev-deps to reduce the number of separate PRs.
      matchPackageNames: [
        // ## pre-commit
        "husky",
        "lint-staged",
        // ## conventional commits
        "cz-conventional-changelog",
        "@commitlint/cli",
        "@commitlint/config-conventional",
        // ## linting and formatting
        "prettier",
        // ## scripts
        "npm-run-all",
        "shx",
        "rimraf",
        // ## coverage
        "coveralls",
        "nyc",
        // ## bundling
        // - intentionally excluded as these often require manual testing of bundled artifacts.
        // "vsce"
        // "esbuild",
        // "webpack",
        // "webpack-cli",
        // ## other
        "ts-node",
      ],
      matchDepTypes: ["devDependencies"],
      matchUpdateTypes: ["minor", "patch"],
      groupName: "all non-major dev cli dependencies",
      groupSlug: "all-dev-cli-minor-patch",
    },
  ],
}
